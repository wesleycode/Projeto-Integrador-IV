<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<!-- Inicia o head -->
<h:head>
    <!-- JQUERY -->
    <h:outputScript library="js" name="jquery-3.5.1.js"/>
    <!-- BOOTSTRAP -->
    <h:outputScript library="js" name="bootstrap.min.js"/>
    <h:outputStylesheet library="css" name="bootstrap.min.css"/>
    <!-- FONTAWESOME -->
    <h:outputScript library="js" name="all.js"/>
    <h:outputStylesheet library="css" name="all.css"/>
    <h:outputStylesheet library="css" name="fontawesome.css"/>
    <!-- STYLESHEET -->
    <h:outputStylesheet library="css" name="cadastroLoginStyle.css"/>
</h:head>
<!-- Finaliza head -->

<!-- Inicia Body -->
<h:body>
    <!-- Conteudo da página fica aqui!!! -->

    <div class="conteudo">

        <div class="wrapper bg-dark">

            <b:messages autoUpdate="true"/>

            <div class="title">
                <div class="navbar-brand text-white logo">SAPITCHO</div>
            </div>

            <div class="form">

                <h:form class="register-form">

                    <h:outputLabel value="Complete seu cadastro"/>
                    <br/>

                    <b:inputText value="#{loginController.cliente.nome}" placeholder="Nome" required="true"
                                 mask="{regex:'[a-zA-Z ]*'}">
                        <f:facet name="prepend">
                            <b:icon name="user"/>
                        </f:facet>
                    </b:inputText>

                    <b:inputText value="#{loginController.cliente.telefone}" placeholder="Telefone" required="true"
                                 mask="(99) 9999-9999">
                        <f:facet name="prepend">
                            <b:iconAwesome name="phone"/>
                        </f:facet>
                    </b:inputText>

                    <b:inputText value="#{loginController.cliente.cpf}" placeholder="Cpf" required="true"
                                 mask="999.999.999-99">
                        <f:facet name="prepend">
                            <b:iconAwesome name="id-card"/>
                        </f:facet>
                    </b:inputText>

                    <b:inputText value="#{loginController.cliente.dataNascimento}"
                                 mask="dd/mm/yyyy" placeholder="Data de Nascimento" required="true">
<!--                        <f:convertDateTime type="date" pattern="dd/MM/yyyy"/>-->
                        <f:converter converterId="dateConverter"/>
                        <f:facet name="prepend">
                            <b:iconAwesome name="birthday-cake"/>
                        </f:facet>
                    </b:inputText>

                    <b:inputText value="#{loginController.cliente.email}" placeholder="Email" required="true"
                                 mask="email">
                        <f:facet name="prepend">
                            <b:iconAwesome name="envelope"/>
                        </f:facet>
                    </b:inputText>

                    <b:inputSecret value="#{loginController.cliente.senha}" placeholder="Senha" required="true"
                                   mask="{regex:'[a-zA-Z0-9]*'}">>
                        <f:facet name="prepend">
                            <b:iconAwesome name="key"/>
                        </f:facet>
                    </b:inputSecret>

                    <h:outputLabel value="Complete seu endereço"/>
                    <br/>

                    <b:inputText value="#{loginController.cliente.endereco.rua}" placeholder="Rua" required="true"
                                 mask="{regex:'[a-zA-Z ]*'}">
                        <f:facet name="prepend">
                            <b:iconAwesome name="map-marker-alt"/>
                        </f:facet>
                    </b:inputText>

                    <b:inputText value="#{loginController.cliente.endereco.bairro}" placeholder="Bairro" required="true"
                                 mask="{regex:'[a-zA-Z ]*'}">
                        <f:facet name="prepend">
                            <b:iconAwesome name="map-marker-alt"/>
                        </f:facet>
                    </b:inputText>

                    <b:inputText value="#{loginController.cliente.endereco.cep}" placeholder="Cep" required="true"
                                 mask="99999-999">
                        <f:facet name="prepend">
                            <b:iconAwesome name="map-marker-alt"/>
                        </f:facet>
                    </b:inputText>

                    <b:inputText value="#{loginController.cliente.endereco.complemento}" placeholder="Complemento"
                                 required="true"
                                 mask="{regex:'[a-zA-Z ]*'}">
                        <f:facet name="prepend">
                            <b:iconAwesome name="map-marker-alt"/>
                        </f:facet>
                    </b:inputText>

                    <b:inputText value="#{loginController.cliente.endereco.numero}" placeholder="Numero" required="true"
                                 mask="{regex:'[0-9]*'}">
                        <f:facet name="prepend">
                            <b:iconAwesome name="map-marker-alt"/>
                        </f:facet>
                    </b:inputText>

                    <h:outputLabel value="Sua localização"/>
                    <br/>

                    <b:selectOneMenu value="#{loginController.cliente.endereco.cidade.estado}" ajax="true"
                                     process="@this" update="@next @next:@next">
                        <f:selectItem value="#{null}" itemLabel="Selecione um estado"/>
                        <f:selectItems value="#{loginController.listarTodosOsEstados()}" var="estado"
                                       itemValue="#{estado}" itemLabel="#{estado.nome}"/>
                        <f:ajax event="change" execute="@this" render="cidadesSelect"/>
                    </b:selectOneMenu>

                    <b:selectOneMenu id="cidadesSelect" value="#{loginController.cliente.endereco.cidade}" ajax="true"
                                     process="@this" update="@next @next:@next">
                        <f:selectItems
                                value="#{loginController.listarTodosAsCidadesPorEstado(loginController.cliente.endereco.cidade.estado)}"
                                var="cidade"
                                itemValue="#{cidade}" itemLabel="#{cidade.nome}"/>
                    </b:selectOneMenu>

                    <br/>

                    <div class="input-field">
                        <h:commandLink action="#{loginController.cadastrarNovoCliente()}" styleClass="button"
                                       type="submit">Cadastrar</h:commandLink>
                        <p class="message">Já possui um cadastro? <a href="#">Logar-se</a></p>
                    </div>

                </h:form>

                <h:form class="login-form">

                    <b:inputText value="#{loginController.cliente.email}" placeholder="Email" required="true"
                                 mask="email">
                        <f:facet name="prepend">
                            <b:iconAwesome name="envelope"/>
                        </f:facet>
                    </b:inputText>

                    <br/>

                    <b:inputSecret value="#{loginController.cliente.senha}" placeholder="Senha">
                        <f:facet name="prepend">
                            <b:iconAwesome name="key"/>
                        </f:facet>
                    </b:inputSecret>

                    <br/>
                    <br/>

                    <div style="text-align: center;">
                        <h:commandLink styleClass="button" value="Entrar"
                                       action="#{loginController.logarCliente()}"/>

                        <br/>
                        <br/>
                        <p class="message">Não possui um cadastro? <a href="#">Criar uma conta</a></p>
                    </div>

                </h:form>

                <br/>
                <br/>

                <h:form>
                    <h:commandLink styleClass="btn btn-warning" value="Voltar ao inicio"
                                   action="#{loginController.irParaIndex()}"/>
                </h:form>
            </div>

        </div>

        <div style="margin-bottom: 170px;"></div>

        <!-- SCRIPT -->
        <script type="application/javascript">
            $('.message a').click(function () {
                $('form').animate({height: "toggle", opacity: "toggle"}, "slow");
            });
        </script>
        <!-- SCRIPT -->

    </div>

</h:body>
<!-- Finaliza body -->
</html>